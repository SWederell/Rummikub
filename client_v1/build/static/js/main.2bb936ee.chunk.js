(this.webpackJsonprummikub_web=this.webpackJsonprummikub_web||[]).push([[0],{48:function(e,t,r){e.exports=r(90)},53:function(e,t,r){},87:function(e,t){},90:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(11),c=r.n(i),l=(r(53),r(1)),o=r(3),u=r(6),s=r(4);function d(){var e=Object(o.a)([""]);return d=function(){return e},e}function p(){var e=Object(o.a)(["\n  display: ",";\n  width: 6vmin;\n  min-width: 6vmin;\n  height: 6vmin;\n  border-radius: 5px;\n  background-color: inherit;\n  border: 2px dashed black;\n"]);return p=function(){return e},e}function f(){var e=Object(o.a)(["\n  width: 6vmin;\n  height: 6vmin;\n  border-radius: 5px;\n  background-color: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  color: ",";\n"]);return f=function(){return e},e}var b=s.a.div(f(),(function(e){return e.tile.error?m(e.colour):"wheat"}),(function(e){return e.tile.error?"wheat":m(e.colour)})),O=s.a.div(p(),(function(e){return e.isDraggingOver?"none":"block"})),m=function(e){switch(e){case"red":return"red";case"bla":return"black";case"blu":return"blue";case"yel":return"goldenrod";default:return"wheat"}},v=s.a.span(d()),g=function(e){var t=e.id,r=e.tile,n=e.index,i="red",c=20;return t&&"empty"!==t&&(i=t.slice(0,3),c=t.slice(4,6)),"empty"!==t?a.a.createElement(u.b,{draggableId:t,index:n,type:"tile"},(function(e,t){return a.a.createElement(b,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef,colour:i,tile:r,isDraggingOver:t.isDraggingOver}),"jo"===c?a.a.createElement("p",null,a.a.createElement("span",{role:"img","aria-label":"joker"},"\ud83d\ude0a")):a.a.createElement(v,null,+c))})):a.a.createElement(O,null)};function j(){var e=Object(o.a)(["\n  display: ",";\n  width: 90%;\n  height: 2px;\n  margin: 5px auto;\n  border-top: 1px solid black;\n  border-bottom: 1px solid black;\n"]);return j=function(){return e},e}function y(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-left: 5px;\n  margin-right: 5px;\n"]);return y=function(){return e},e}function h(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-contents: center:\n  margin-right: 10px;\n"]);return h=function(){return e},e}var E=s.a.div(h()),w=s.a.div(y()),x=s.a.div(j(),(function(e){return e.isDragDisabled?"none":"block"})),D=function(e){var t=e.group,r=e.index,n=t.tiles,i=t.id;return a.a.createElement(u.b,{draggableId:i,index:r},(function(e){return a.a.createElement(w,Object.assign({},e.draggableProps,{ref:e.innerRef}),a.a.createElement(u.c,{droppableId:i,direction:"horizontal",type:"tile"},(function(e){return a.a.createElement(E,Object.assign({},e.droppableProps,{ref:e.innerRef}),n.map((function(e,t){return a.a.createElement(g,{id:e.id,key:"".concat(e.id),index:t,tile:e})})),e.placeholder)})),a.a.createElement(x,Object.assign({},e.dragHandleProps,{isDragDisabled:"empty"===i.slice(-5)})))}))};function I(){var e=Object(o.a)(["\n  display: inline-flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  align-content: space-around;\n  background-color: white;\n  padding: 10px;\n  height: 60vh;\n  width: 80vw;\n  margin-bottom: 20px;\n"]);return I=function(){return e},e}var k=s.a.div(I()),G=function(e){var t=e.areaDisplayOrder,r=e.tileGroups;return a.a.createElement(u.c,{droppableId:"gameArea",direction:"horizontal",type:"group"},(function(e){return a.a.createElement(k,Object.assign({},e.droppableProps,{ref:e.innerRef}),t.map((function(e,t){return a.a.createElement(D,{group:r[e],key:r[e].id,index:t})})),e.placeholder)}))},S=r(8);function T(){var e=Object(o.a)(["\n  display: inline-flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  align-content: space-around;\n  background-color: darkgreen;\n  padding: 10px;\n  height: 15vh;\n  width: 70vw;\n"]);return T=function(){return e},e}var _=s.a.div(T()),A=function(e){var t=e.standDisplayOrder,r=e.tileGroups;return a.a.createElement(u.c,{droppableId:"tileStand",direction:"horizontal",type:"group"},(function(e){return a.a.createElement(_,Object.assign({},e.droppableProps,{ref:e.innerRef}),t.map((function(e,t){return a.a.createElement(D,{group:r[e],key:r[e].id,index:t})})),e.placeholder)}))};function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var P=a.a.createElement("path",{d:"M488,256A232.014,232.014,0,0,1,114.533,439.892,233.557,233.557,0,0,1,32.508,318.447a24,24,0,1,1,46.235-12.894,185.25,185.25,0,0,0,65.083,96.312A182.236,182.236,0,0,0,256,440c101.458,0,184-82.542,184-184S357.458,72,256,72a182.241,182.241,0,0,0-112.175,38.135,184.6,184.6,0,0,0-32.139,31.792l-18.549,5.456L90.161,93.807A231.977,231.977,0,0,1,488,256ZM62.771,223.024l136-40a24,24,0,1,0-13.543-46.048L78.282,168.43,71.962,54.669a24,24,0,1,0-47.924,2.662l8,144a24,24,0,0,0,30.734,21.693Z"}),M=function(e){var t=e.svgRef,r=e.title,n=F(e,["svgRef","title"]);return a.a.createElement("svg",R({fill:"#FFFFFF",id:"Solid",viewBox:"0 0 512 512",width:512,height:512,ref:t},n),r?a.a.createElement("title",null,r):null,P)},U=a.a.forwardRef((function(e,t){return a.a.createElement(M,R({svgRef:t},e))}));r.p;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var V=a.a.createElement("path",{d:"m383.432 280h-335.432a24 24 0 0 1 0-48h335.432l24 24zm-46.461 136.971 144-144a24 24 0 0 0 0-33.942l-144-144a24 24 0 0 0 -33.942 33.942l127.03 127.029-127.03 127.029a24 24 0 0 0 33.942 33.942z"}),L=function(e){var t=e.svgRef,r=e.title,n=z(e,["svgRef","title"]);return a.a.createElement("svg",C({id:"Solid",height:512,fill:"#FFFFFF",viewBox:"0 0 512 512",width:512,ref:t},n),r?a.a.createElement("title",null,r):null,V)},N=a.a.forwardRef((function(e,t){return a.a.createElement(L,C({svgRef:t},e))}));r.p;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var H=a.a.createElement("path",{d:"m224 0c-123.710938 0-224 100.289062-224 224s100.289062 224 224 224 224-100.289062 224-224c-.140625-123.652344-100.347656-223.859375-224-224zm112 232h-104v104c0 4.417969-3.582031 8-8 8s-8-3.582031-8-8v-104h-104c-4.417969 0-8-3.582031-8-8s3.582031-8 8-8h104v-104c0-4.417969 3.582031-8 8-8s8 3.582031 8 8v104h104c4.417969 0 8 3.582031 8 8s-3.582031 8-8 8zm0 0"}),J=function(e){var t=e.svgRef,r=e.title,n=X(e,["svgRef","title"]);return a.a.createElement("svg",B({height:"448pt",viewBox:"0 0 448 448",width:"448pt",fill:"#FFFFFF",ref:t},n),r?a.a.createElement("title",null,r):null,H)},Z=a.a.forwardRef((function(e,t){return a.a.createElement(J,B({svgRef:t},e))}));r.p;function q(){var e=Object(o.a)(["\n  margin-top: 2px;\n  margin-bottom: 2px;\n"]);return q=function(){return e},e}function K(){var e=Object(o.a)(['\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 8vh;\n  font-size: 2vh;\n  margin-left: 10px;\n  margin-right: 10px;\n  cursor: pointer;\n  userselect: "false";\n']);return K=function(){return e},e}function Q(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n"]);return Q=function(){return e},e}function W(){var e=Object(o.a)(["\n  text-align: center;\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: max(calc(10px + 2vmin), 6px);\n  font-family: Verdana, sans-serif;\n  color: white;\n  flex-direction: column;\n"]);return W=function(){return e},e}var Y=s.a.div(W()),$=s.a.div(Q()),ee=s.a.div(K()),te=s.a.p(q()),re={moveTile:function(e,t){return{type:"MOVE_TILE",payload:{result:e,socket:t}}},undoMove:function(){return{type:"UNDO_MOVE"}},startTurn:function(){return{type:"START_TURN"}}},ne=Object(S.b)((function(e,t){var r=e.tilesReducer,n=r.areaDisplayOrder,a=r.standDisplayOrder,i=r.tileGroups,c=r.previousStates,o=r.standToArea,u=r.gameID,s=r.initialDrawComplete;return Object(l.a)(Object(l.a)({},t),{},{areaDisplayOrder:n,standDisplayOrder:a,tileGroups:i,previousStates:c,standToArea:o,gameID:u,state:e,initialDrawComplete:s})}),re)((function(e){var t=e.areaDisplayOrder,r=e.gameID,n=e.initialDrawComplete,i=e.moveTile,c=e.previousStates,l=e.socket,o=e.standDisplayOrder,s=e.standToArea,d=e.tileGroups,p=e.undoMove;return a.a.createElement(u.a,{onDragEnd:function(e){i(e,l)}},a.a.createElement(Y,null,a.a.createElement("p",null,"Socket: ",l.id,", GameID: ",r),a.a.createElement(G,{areaDisplayOrder:t,tileGroups:d}),a.a.createElement($,null,a.a.createElement(ee,{onClick:p,disabled:0===c.length},a.a.createElement(U,{fill:"#FA2",style:{height:"8vh",width:"8vh"}}),a.a.createElement(te,null,"Undo Move")),a.a.createElement(A,{standDisplayOrder:o,tileGroups:d}),a.a.createElement(ee,null,!0===s?a.a.createElement("div",{onClick:function(){l.emit("end-turn")}},a.a.createElement(N,{fill:"#FA2",style:{height:"8vh",width:"8vh"}}),a.a.createElement(te,{style:{width:"100%"}},"End Turn")):a.a.createElement("div",{onClick:function(){n?l.emit("draw-tile",{number:1,gameID:r}):l.emit("draw-tile",{number:14,gameID:r})}},a.a.createElement(Z,{fill:"#FA2",style:{height:"8vh",width:"8vh"}}),a.a.createElement(te,null,n?"Draw & End Turn":"Draw Tile"))))))})),ae=r(7),ie=r(5),ce=r(14),le=r(26),oe=r.n(le),ue=function(e,t){var r,n=t.result,a=t.socket,i=Object(l.a)(Object(l.a)({},e),{},{previousStates:[].concat(Object(ce.a)(e.previousStates),[e])}),c=n.destination,o=n.source,u=n.draggableId,s=n.type;if(!c)return i;if(c.droppableId===o.droppableId&&c.index===o.index)return i;if("group"===s){var d=o.droppableId.slice(0,3),p=c.droppableId.slice(0,3);switch(p){case"gam":p="area";break;case"til":p="stand"}switch(d){case"gam":d="area";break;case"til":d="stand"}"area"===p&&"stand"===d&&(i=Object(l.a)(Object(l.a)({},i),{},{standToArea:!0}));var f=Array.from(i["".concat(d,"DisplayOrder")]),b=Array.from(i["".concat(p,"DisplayOrder")]);return o.droppableId===c.droppableId?(b.splice(o.index,1),b.splice(c.index===b.length?c.index-1:c.index,0,u)):(i.tileGroups[u].draw&&(i=Object(l.a)(Object(l.a)({},i),{},{tileGroups:Object(l.a)(Object(l.a)({},i.tileGroups),{},Object(ie.a)({},u,Object(l.a)(Object(l.a)({},i.tileGroups[u]),{},{draw:!1})))})),f.splice(o.index,1),b.splice(c.index===b.length?c.index-1:c.index,0,u)),i["".concat(d,"DisplayOrder")]=f,i["".concat(p,"DisplayOrder")]=b,se(a,i),i}var O=i.tileGroups[o.droppableId],m=i.tileGroups[c.droppableId],v=Object(l.a)({},O.tiles[o.index]);if("empty"===c.droppableId.slice(-5)){var g=c.droppableId.slice(0,3);switch(g){case"are":g="area";break;case"sta":g="stand"}m={id:"".concat(oe()()),type:g,tiles:[]};var j=Object(ce.a)(i["".concat(g,"DisplayOrder")]);j.splice(j.length-1,0,m.id),i=Object(l.a)(Object(l.a)({},i),{},Object(ie.a)({},"".concat(g,"DisplayOrder"),j))}if(O===m){var y=Array.from(O.tiles);y.splice(o.index,1),y.splice(c.index,0,v);var h=Object(l.a)(Object(l.a)({},O),{},{tiles:be(y,O.draw)});return i=Object(l.a)(Object(l.a)({},i),{},{tileGroups:Object(l.a)(Object(l.a)({},i.tileGroups),{},Object(ie.a)({},h.id,h))}),se(a,i),i}var E=Array.from(O.tiles);E.splice(o.index,1);var w=Object(l.a)(Object(l.a)({},O),{},{tiles:be(E,O.draw)}),x=Array.from(m.tiles);x.splice(c.index,0,v);var D=Object(l.a)(Object(l.a)({},m),{},{tiles:be(x,m.draw)});return i.areaDisplayOrder.includes(c.droppableId)&&i.standDisplayOrder.includes(o.droppableId)&&(i=Object(l.a)(Object(l.a)({},i),{},{standToArea:!0})),i=Object(l.a)(Object(l.a)({},i),{},{tileGroups:Object(l.a)(Object(l.a)({},e.tileGroups),{},(r={},Object(ie.a)(r,w.id,w),Object(ie.a)(r,D.id,D),r))}),0===w.tiles.length&&(i=de(i,w)),se(a,i),i},se=function(e,t){var r={};Object.keys(t.tileGroups).forEach((function(e){"area"===t.tileGroups[e].type&&(r[e]=Object(l.a)({},t.tileGroups[e]))}));var n={tileGroups:r,areaDisplayOrder:t.areaDisplayOrder,gameID:t.gameID};e.emit("update-server-from-client",n)},de=function(e,t){var r=Object(l.a)({},e),n=t.type,a=Object(ce.a)(e["".concat(n,"DisplayOrder")]),i=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r}(a,t.id);a.splice(i,1);var c=Object(l.a)({},r.tileGroups);return delete c[t.id],r=Object(l.a)(Object(l.a)({},r),{},Object(ie.a)({tileGroups:c},"".concat(n,"DisplayOrder"),a))},pe=function(e,t){var r=function(e,t){var r="".concat(oe()()),n={id:r,type:t,tiles:[]},a=Object(ce.a)(e["".concat(t,"DisplayOrder")]);return a.splice(a.length-1,0,r),{tempState:Object(l.a)(Object(l.a)({},e),{},Object(ie.a)({tileGroups:Object(l.a)(Object(l.a)({},e.tileGroups),{},Object(ie.a)({},r,n))},"".concat(t,"DisplayOrder"),a)),newTileGroup:n}}(e,"stand"),n=r.newTileGroup,a=Object(l.a)({},r.tempState);return 14===t.length&&(a=Object(l.a)(Object(l.a)({},a),{},{initialDrawComplete:!0})),n=Object(l.a)(Object(l.a)({},n),{},{draw:!0,tiles:Object(ce.a)(t)}),a=Object(l.a)(Object(l.a)({},a),{},{tileGroups:Object(l.a)(Object(l.a)({},a.tileGroups),{},Object(ie.a)({},n.id,n))}),console.log({tempState:a}),a},fe=function(e){return Object(l.a)(Object(l.a)({},e),{},{previousStates:[]})},be=function(e,t){var r,n=e;if(t)return n;if(n.length<3)return n=n.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:!0})}));n=n.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{error:!1})}));for(var a="",i=0;i<n.length;i++){var c=n[i].id;if("jok"!==c.slice(0,3)){if(""!==a){if(c.slice(0,3)===a){r="run";break}r="group";break}a=c.slice(0,3)}}if("group"===r){var o,u=[],s=[];n=(n=n.map((function(e){var t=e.id,r=t.slice(0,3);return"jok"===r||(0===u.length?(u.push(r),o=+t.slice(4,6)):u.includes(r)?s.push(r):+t.slice(4,6)!==o||u.push(r)),e}))).map((function(e){var t=e.id.slice(0,3);return s.includes(t)?Object(l.a)(Object(l.a)({},e),{},{error:!0}):Object(l.a)(Object(l.a)({},e),{},{error:!1})}))}if("run"===r){var d,p="";n=n.map((function(e,t){var r=e.id,n=r.slice(0,3),a=+r.slice(4,6);return"jok"===n?(void 0!==d&&(d+=1),Object(l.a)(Object(l.a)({},e),{},{error:!1})):""===p?(p=n,d=a,Object(l.a)(Object(l.a)({},e),{},{error:!1})):n!==p?Object(l.a)(Object(l.a)({},e),{},{error:!0}):a===d+1?(d=a,Object(l.a)(Object(l.a)({},e),{},{error:!1})):(d=a,Object(l.a)(Object(l.a)({},e),{},{error:!0}))}))}return n},Oe={gameStart:!1,gameID:"",standToArea:!1,initialDrawComplete:!1,tileGroups:{"stand-empty":{id:"stand-empty",type:"stand",tiles:[{id:"empty"}]},"area-empty":{id:"area-empty",type:"area",tiles:[{id:"empty"}]}},areaDisplayOrder:["area-empty"],standDisplayOrder:["stand-empty"],previousStates:[]},me=(0,r(7).combineReducers)({tilesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVE_TILE":return ue(e,t.payload);case"UNDO_MOVE":var r=e.previousStates;if(0===r.length)return e;var n=Object(l.a)({},r[r.length-1]);return n;case"START_TURN":return fe(e);case"SIO_RECEIVE_TILE":return pe(e,t.payload);case"SIO_UPDATE_GAME_ID":return Object(l.a)(Object(l.a)({},e),{},{gameID:t.payload});case"SIO_UPDATE_GAME_STATE":return Object(l.a)(Object(l.a)({},e),{},{tileGroups:Object(l.a)(Object(l.a)({},e.tileGroups),t.payload.tileGroups),areaDisplayOrder:t.payload.areaDisplayOrder});default:return e}}}),ve=Object(ae.createStore)(me,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ge={updateGameID:function(e){return{type:"SIO_UPDATE_GAME_ID",payload:e}},updateGameState:function(e){return{type:"SIO_UPDATE_GAME_STATE",payload:e}},receiveDrawnTile:function(e){return{type:"SIO_RECEIVE_TILE",payload:e}}},je=Object(S.b)((function(e,t){return{}}),ge)((function(e){var t=e.socket,r=e.receiveDrawnTile,i=e.updateGameID,c=e.updateGameState;return t.on("join-game",(function(e){i(e)})),t.on("send-tiles",(function(e){r(e)})),t.on("update-client-from-server",(function(e){console.log("update-client-from-server called"),c(e)})),a.a.createElement(n.Fragment,null,e.children)})),ye=r(47),he=r.n(ye)()("http://127.0.0.1:4001");c.a.render(a.a.createElement(S.a,{store:ve},a.a.createElement(a.a.StrictMode,null,a.a.createElement(je,{socket:he},a.a.createElement(ne,{socket:he})))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.2bb936ee.chunk.js.map